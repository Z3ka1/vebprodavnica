@using VebProdavnica.Models;
@{
    Layout = null;
    ViewBag.Title = "Index";
    var SviProizvodi = ViewData["Proizvodi"] as Dictionary<int, Proizvod>;
}

<head>
    <title>Markova Prodavnica</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 0px;
        }

        .elements {
            padding: 20px;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
        }

        h3 {
            color: #cc0000;
            margin-top: 20px;
        }

        ul {
            list-style-type: none;
            padding: 0px;
            margin: 0;
            background-color: #333;
            overflow: hidden;
            position: sticky;
            top: 0;
        }

        li {
            display: inline;
            margin-right: 10px;
            float: left;
        }

        li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        a {
            color: #333;
            text-decoration: none;
        }

        /*.active
        {
            background-color: red;
        }*/

        a:hover {
            color: #cc0000;
        }

        .form-container {
            margin-top: 1px;
            margin-bottom: 1px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            padding: 10px;
            text-align: center;
        }

        th {
            background-color: #333;
            color: #fff;
        }

        img {
            width: 150px;
            height: 100px;
        }
    </style>
</head>

<body>


    @if (HttpContext.Current.Session["korisnik"] == null)
    {
        <ul>
            <li><a href="~/Prodavnica/Index">Pocetna stranica</a></li>
            <li style="float:right"><a href="~/Prodavnica/Prijava">Prijavi se</a></li>
            <li style="float:right"><a href="~/Prodavnica/Registracija">Registracija</a></li>
        </ul>
    }
    else
    {
        <ul>
            <li><a href="~/Prodavnica/Index">Pocetna stranica</a></li>
            <li style="float:right"><a href="~/Prodavnica/Odjava">Odjavi se</a></li>
            <li style="float:right"><a href="~/Prodavnica/Profil">Moj profil</a></li>
        </ul>
    }
    

<div class="elements">
    <h2>Dobrodošli u prodavnicu</h2>
    <h2>@ViewBag.Greska</h2>

    <div class="form-container">
        <table>
            <tr>
                <td>
                    <form action="/Prodavnica/Sort">
                        <table>
                            <tr>
                                <td>
                                    <h4>Sortiraj:</h4>
                                    <input list="sort" name="kriterijum" />
                                    <datalist id="sort">
                                        <option value="Naziv(rastuce)" />
                                        <option value="Naziv(opadajuce)" />
                                        <option value="Cena(rastuce)" />
                                        <option value="Cena(opadajuce)" />
                                        <option value="Datum oglasavanja(rastuce)" />
                                        <option value="Datum oglasavanja(opadajuce)" />
                                    </datalist>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="submit" value="Sortiraj" />
                                </td>
                            </tr>
                        </table>
                    </form>
                </td>
                <td>
                    <form action="/Prodavnica/Pretraga">
                        <table>
                            <tr>
                                <td>
                                    <h4>Pretrazi:</h4>
                                </td>
                            </tr>
                            <tr>
                                <td>Naziv:</td>
                                <td><input type="text" name="naziv" /></td>
                            </tr>
                            <tr>
                                <td>Cena:</td>
                                <td>Od: <input type="text" name="cenaOd" /></td>
                                <td>Do: <input type="text" name="cenaDo" /></td>
                            </tr>
                            <tr>
                                <td>Grad:</td>
                                <td><input type="text" name="grad" /></td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="submit" value="Pretrazi" />
                                </td>
                            </tr>
                        </table>
                    </form>
                </td>
            </tr>
        </table>
        <a href="~/Prodavnica/Index">Ponisti pretragu</a>
        <h3>@ViewBag.Pretraga</h3>
    </div>

    <table border="1">
        <tr>
            <th>Naziv</th>
            <th>Slika</th>
            <th>Cena</th>
            <th>Grad</th>
            <th>Datum postavljanja</th>

            <th>Detalji</th>
        </tr>

        @foreach (Proizvod p in SviProizvodi.Values)
        {
            if (p.kolicina > 0)
            {
                <tr>
                    <td>@p.naziv</td>
                    <td><img src="@p.slika" alt="@p.naziv" /></td>
                    <td>@p.cena</td>
                    <td>@p.grad</td>
                    <td>@p.datumPostavljanja.ToString("dd.MM.yyyy")</td>
                    <td>
                        <form action="/Prodavnica/DetaljiProizvoda">
                            <input type="number" value="@p.id" name="id" hidden />
                            <input type="submit" value="Vise o proizvodu" />
                        </form>
                    </td>
                </tr>
            }
        }
    </table>
</div>
</body>